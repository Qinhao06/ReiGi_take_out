<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.qh.reigi.dao.mapper.DishMapper">
    <insert id="insertDishFavor">
        insert into dish_flavor (dish_id,  name, value,  create_time,  update_time,  create_user,  update_user,  is_deleted)
        values (#{dishFlavor.dishId}, #{dishFlavor.name}, #{dishFlavor.value}, #{dishFlavor.createTime}, #{dishFlavor.updateTime}, #{dishFlavor.createUser}, #{dishFlavor.updateUser}, #{dishFlavor.isDeleted})
    </insert>
    <insert id="insertDish">
        insert into dish
            ( name,  category_id,  price,  code,  image, description,status,  sort,  create_time,  update_time,  create_user,  update_user, is_deleted)
        values (#{dish.name}, #{dish.categoryId}, #{dish.price}, #{dish.code}, #{dish.image}, #{dish.description}, #{dish.status}, #{dish.sort}, #{dish.createTime}, #{dish.updateTime}, #{dish.createUser}, #{dish.updateUser}, #{dish.isDeleted})
    </insert>
    <update id="changeStatus">
        update dish set status = #{status}
                    where id = #{id}
    </update>
    <update id="deleteDish">
        update dish set is_deleted = #{isDeleted}
        where id = #{id}
    </update>


    <select id="getDishId" resultType="java.lang.Long">
        select id from dish
        where name = #{dish.name} and create_user = #{dish.createUser}
    </select>
    <select id="getDishListByCategoryId" resultType="java.util.Map">
        select * from dish where category_id = #{categoryId}

    </select>

</mapper>